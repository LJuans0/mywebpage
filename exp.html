<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juegos que he jugado</title>
  <link rel='stylesheet' type='text/css' href='style.css'>
  <link href="https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Hind+Madurai:wght@300;400;500;600;700&family=Karla:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">

</head>
  
<body>

<div class="crt"></div>
<div class="background-waves"></div>

   <header class="page-header">
        <h1 class="page-title">Mi EXP</h1>
        <p class="page-subtitle">La razón principal de esta página es poder recopilar y tener un registro de todos los juegos que he jugado e idealmente pasado. ¡Toma un vistazo y veamos si tenemos algo en común!</p>
    </header>

    <div class="disclaimer">
        <strong>Nota importante:</strong> Las puntuaciones y opiniones reflejadas aquí son meramente personales y subjetivas: representan que tanto me entretuve o disfrute cada juego.
    </div>

<div class="filter-controls">
    <div class="search-container">
        <input type="text" id="searchInput" class="search-box" placeholder="Buscar juegos..." aria-label="Buscar juegos">
        <label class="favorite-switch">
            <input type="checkbox" id="favoriteFilter">
            <span class="slider round"></span>
            <span class="switch-label">Solo favoritos</span>
        </label>
    </div>
</div>
<div id="gamesCounter" style="text-align: center; margin: 10px 0;"></div>
<div class="games-container" id="gamesContainer">
    <!-- Las tarjetas de juegos se generarán dinámicamente -->
</div>


<script>
const games = [
    {
        title: "Shin Megami Tensei V: Vangeance",
        score: 5,
        icon: "https://cdn2.steamgriddb.com/icon/dd3cd8b31f21e6ff4f74584f8710277f.ico",
        favorite: true,
        playtime: "60h",
        finishedDate: "12/1/2022",
        platform: "PS4",
        review: "el PRIMER y probablemente ÚNICO rogue like que me ha gustado hasta ahora. parece que tiene correlación con poker obviamente jamás he jugado poker y me costó un poco al inicio entender las jugadas. puede que haberlo conocido antes hubiese hecho de mi inicio algo más suave y llevadero. sin embargo, el jugo de este juego sin duda está en los joker. de alguna manera el desarrollador logró que una mecánica de power ups tan básica y simplona como puede ser, sea tan entretenida y adictiva. GOTY? no lo creo. al final, siento que es un dopamine relief, con todo lo juicy que se siente cada interacción.",
        ost: "https://www.youtube.com/embed/N4BddJsbmqw?si=Zd_dTGRXgw2xhGWk&amp;controls=0",
        cover: "https://cdn.mobygames.com/covers/4749225-shin-megami-tensei-persona-3-fes-playstation-2-front-cover.jpg"
    },
    {
        title: "The Legend of Zelda: Majora's Mask",
        score: "10",
        icon: "https://cdn2.steamgriddb.com/icon/dd3cd8b31f21e6ff4f74584f8710277f.ico",
        favorite: true,
        playtime: "40h",
        finishedDate: "12/2/2021",
        platform: "N64",
        review: "Una experiencia única, melancólica y brillante.",
        ost: "https://www.youtube.com/embed/N4BddJsbmqw?si=Zd_dTGRXgw2xhGWk&amp;controls=0",
        cover: "https://cdn.mobygames.com/covers/4749225-shin-megami-tensei-persona-3-fes-playstation-2-front-cover.jpg"
    }
];

document.addEventListener('DOMContentLoaded', () => {

    function openModal(game) {
    document.getElementById('modalTitle').textContent = game.title;
    document.getElementById('modalFavorite').textContent = game.favorite ? "★" : "";
    document.getElementById('modalScore').textContent = game.score;
    document.getElementById('modalTime').textContent = game.playtime || "N/D";
    document.getElementById('modalDate').textContent = game.finishedDate || "N/D";
    document.getElementById('modalPlatform').textContent = game.platform || "N/D";
    document.getElementById('modalReview').textContent = game.review || "Sin reseña";
    document.getElementById('modalVideo').src = game.ost || "";
    document.getElementById('modalCover').src = game.cover || "";

    document.getElementById('gameModal').classList.remove('hidden');
}

    document.querySelector('.close-button').addEventListener('click', () => {
        document.getElementById('gameModal').classList.add('hidden');
        document.getElementById('modalVideo').src = ""; // Detener video
    });

    function renderGames(filteredGames = games) {
        const container = document.getElementById('gamesContainer');
        container.innerHTML = '';

        if (filteredGames.length === 0) {
            container.innerHTML = '<div class="no-results">No se encontraron juegos que coincidan con tu búsqueda.</div>';
            return;
        }

        filteredGames.forEach(game => {
            const gameCard = document.createElement('a');
            gameCard.className = 'game-card-horizontal';
            gameCard.href = '#';

            gameCard.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(game);
            });

            if (game.favorite) {
                gameCard.classList.add('favorite');
            }

            gameCard.innerHTML = `
                <img src="${game.icon}" alt="Ícono de ${game.title}" class="game-icon-horizontal">
                <div class="game-info-horizontal">
                    <div class="game-title-horizontal">${game.title}</div>
                    <div class="game-score-horizontal">${game.score}</div>
                </div>
                <div class="favorite-icon">${game.favorite ? '★' : ''}</div>
            `;

            container.appendChild(gameCard);
        });

        document.getElementById('gamesCounter').textContent =
            `Mostrando ${filteredGames.length} de ${games.length} juegos`;
    }

    function filterGames() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const onlyFavorites = document.getElementById('favoriteFilter').checked;

        const filteredGames = games.filter(game => {
            const matchesSearch = game.title.toLowerCase().includes(searchTerm);
            const matchesFavorite = onlyFavorites ? game.favorite : true;
            return matchesSearch && matchesFavorite;
        });

        renderGames(filteredGames);
    }

    // Event listeners
    document.getElementById('searchInput').addEventListener('input', filterGames);
    document.getElementById('favoriteFilter').addEventListener('change', filterGames);

    // Renderizar al inicio
    renderGames();
});
</script>

<div id="gameModal" class="modal hidden">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <div class="modal-body">
      <div class="modal-left">
        <img id="modalCover" src="" alt="Cover del juego" class="modal-cover">
      </div>
      <div class="modal-right">
        <div class="modal-header">
          <h2>
    <span id="modalFavorite">★</span>
    <span id="modalTitle">Título</span>

  </h2>
  <div class="modal-score" id="modalScore">95</div>
        </div>
        <div class="modal-meta">
          <p><strong>Tiempo:</strong> <span id="modalTime"></span></p>
          <p><strong>Terminado:</strong> <span id="modalDate"></span></p>
          <p><strong>Plataforma:</strong> <span id="modalPlatform"></span></p>
        </div>
        <div class="modal-review">
          <p id="modalReview"></p> Mejor track del OST:
        </div>
        <div class="modal-video">
          <iframe id="modalVideo" width="224" height="126" frameborder="1"></iframe>
        </div>
      </div>
    </div>
  </div>
</div>

<!//NO CAMBIAR NADA DE ABAJOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO-->

  <svg width="0" height="0">
    <defs>
      <filter id="displacementFilter">
        <feTurbulence type="fractalNoise" baseFrequency="0" numOctaves="1" result="turbulence"/>
        <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="0" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>

<canvas id="wave-bg"></canvas>
<script>
  const canvas = document.getElementById('wave-bg');
  const ctx = canvas.getContext('2d');

  let width, height;
  let baseAmplitude = 0;
  let amplitudeBoost = 0;
  let lastMouseX = 0;
  let lastMouseY = 0;
  let lastMoveTime = Date.now();

  const sensitivity = 0.015; // CAMBIA ESTE VALOR PARA AJUSTAR LA SENSIBILIDAD (0.1 = baja, 1.0 = alta)

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }

  window.addEventListener('resize', resize);
  resize();

  document.addEventListener('mousemove', e => {
    const dx = e.clientX - lastMouseX;
    const dy = e.clientY - lastMouseY;
    const distance = Math.sqrt(dx * dx + dy * dy);

    amplitudeBoost += distance * sensitivity; // ✅ Aplica sensibilidad
    amplitudeBoost = Math.min(amplitudeBoost, 50);

    lastMouseX = e.clientX;
    lastMouseY = e.clientY;
    lastMoveTime = Date.now();
  });

  function draw() {
    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = '#f6fcff';
    ctx.fillRect(0, 0, width, height);

    const timeSinceLastMove = Date.now() - lastMoveTime;
    if (timeSinceLastMove > 0) {
      amplitudeBoost *= 0.95;
      if (amplitudeBoost < 0.01) amplitudeBoost = 0;
    }

    const waveCount = 4;
    for (let i = 0; i < waveCount; i++) {
      const amplitude = baseAmplitude + amplitudeBoost + i * 5;
      const frequency = 0.005 + i * 0.001;
      const offsetY = height * (0.2 + i * 0.15);
      const color = `rgba(100, 169, 255, ${0.06 + i * 0.04})`;

      ctx.beginPath();
      for (let x = 0; x <= width; x++) {
        const y = offsetY + Math.sin(x * frequency + Date.now() * 0.001) * amplitude;
        ctx.lineTo(x, y);
      }
      ctx.lineTo(width, height);
      ctx.lineTo(0, height);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }

  draw();
</script>
<script type="module">
  import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.125.2/build/three.module.js';

  function createGameCover(containerId, textureURL) {
    const container = document.getElementById(containerId);
    if (!container) return;

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(45, 200 / 250, 0.1, 1000);
    camera.position.z = 3;

    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setSize(100, 100);
    container.appendChild(renderer.domElement);

    const loader = new THREE.TextureLoader();
    loader.load(textureURL, (texture) => {
      const geometry = new THREE.BoxGeometry(1.1, 1.7, 0.1);
      const materials = [
        new THREE.MeshBasicMaterial({ map: texture }), // right
        new THREE.MeshBasicMaterial({ map: texture }), // left
        new THREE.MeshBasicMaterial({ map: texture }), // top
        new THREE.MeshBasicMaterial({ map: texture }), // bottom
        new THREE.MeshBasicMaterial({ map: texture }), // front
        new THREE.MeshBasicMaterial({ map: texture }), // back
      ];
      const box = new THREE.Mesh(geometry, materials);
      scene.add(box);

      function animate() {
        requestAnimationFrame(animate);
        box.rotation.y += 0.004;
        box.rotation.x = 0.2;
        box.rotation.z = -0.1;
        renderer.render(scene, camera);
      }

      animate();
    });
  }

  // 👇 Aquí llamas la función para cada juego
  createGameCover('game-3d-witcher', 'https://upload.wikimedia.org/wikipedia/en/5/57/The_Legend_of_Zelda_Ocarina_of_Time.jpg');
</script>

</body>
</html>
